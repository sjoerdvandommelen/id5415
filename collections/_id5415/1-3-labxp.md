---
layout: course-page
title: 'Reverse Engineering'
permalink: /module1/labxp
description: 'Prototyping Connected Products - Lab Experiment 1'
labxp-of: id5415-1
introduction: Lab experiment is the term we use in this course for making use of the prototype through test and analysis. In this Lab experiment, we will explore the  data that is automatically generated from your Raspberry Pi. We will have the first taste of data exploration and use these insights to infer how the system works.
technique: Data Exploration, Reverse Engineering
metrics:
report: System Architecture, System Data Visualisation
---

---

* Do not remove this line (it will not be displayed)
{:toc}

---

TODO To review

# Step 1: Team work

From the matchmaking event of the first coaching session, you should now be part of a team. Throughout the course you will use GitHub as a platform to share your assignment code with the team and report on lab experiments.

**Note:** Keep in mind that during the coaching sessions you will receive feedback only based on what you share on this repository.

## Task 1.1: GitHub invitation

Use the GitHub invitation link shared by the course coordinator to create your repository. You will be prompt for the name of your team. Make sure you enter the same name as your teammates.

TODO little tour of the GitHub interface and repository

- doc folder
- src folder
- ChangeLog file

## Task 1.2: Markdown

Markdown is a markup language to quickly format text. This is the language used throughout the developer community to format code documentation. In this course you will use Markdown to report on assignments and lab experiments. Let's walk through the basics.

On GitHub, edit the `README.md` (`.md` for MarkDown).

![](/assets/img/courses/id5415/module1/labxp/1_2_1.png)

The README.md file is the first document to show up when reaching your repository. Let's give it a personalised touch. Hash `#` signs are used for headers. Create a contributors' section and list the name and 1-sentence bio of your team members.

```markdown
# Contributors

- John, ...
- Yu, ...
- Els, ...
```

You can preview your changes, then press the green button 'Commit changes' to save (more on this terminology in assignment 2).

![](/assets/img/courses/id5415/module1/labxp/1_2_2.png)

You can add tables, images, links and so on with similar tags. We now set an introduction image. Click on the 'doc' folder then 'images'. Click on the drop-down menu Add File > Upload files and drag and drop your image. Once again, press the green button 'Commit changes' to save (this can take a while).

Back to your README.md, type in the following at the top of the file (replace projectbanner.png by the name of your file):

```markdown
![Project Banner](doc/images/projectbanner.png)
```

![](/assets/img/courses/id5415/module1/labxp/1_2_3.png)

A cheat sheet of Markdown can be found [here](https://www.markdownguide.org/cheat-sheet/)

**What did we achieved?**

- we have a GitHub repository, ready to report a lab experiment
- we have some basics of formatting for reporting

# Step 2: Identifying the IoT's Technology Stack

In this step you will start exploring two types of data: the logs generated by the hub to understand what is happening and the sensor data generated by the connected devices.

In the self-study material we explored the IoT's technology stack. Let's identify the components of the 5 layers of this stack for our prototype.

## Task 2.1: System Architecture

- What are the device hardware components?
- What are the device software components?
- What are the communication components?
- What are the cloud platform components?
- What are the cloud application components?

In this exercise, do not hesitate to distinguish:

- what you know and how?
- What you assume. In this case, what are the possibilities and why do you make this assumption?

**Report** On GitHub, in the doc folder, create a file architecture.md. Describe this IoT stack with text and diagrams.

There is no clear standard to represent an IoT Architecture. Your diagram should focus on what you think is important to communicate. However, keep in mind that your audience can be very divers from a Designer to software or data engineering.

# Step 3: Logs

It is common for software to generate logs so that the maintainers can monitor it and look for information when things go wrong.

TODO log exploration

In the Raspberry Pi image that you downloaded from Bucket, we installed a couple of Python scripts. Instead of looking a the code, that we do not understand yet, let's looks at the logs of these scripts.

## Task 3.1 Find the Logs

Connect to the Raspberry Pi with ssh. As before, replace the square bracket with your information.

```bash
ssh [username]@[hostname or id address]
```

```bash
cd /var/log/dcd
```

What is in this folder? Let's list its content:

```bash
ls
```

We can see there is one directory named after your Thing id. We now enter this folder, replacing the square brackets with your Thing id as listed in the folder.

```bash
cd [your thing id]
```

## Task 3.2 Read the Logs

Use the ls command again to list the content of this directory. You should see files with names like the followings:

```bash
2020-08-22.log
2020-08-23.log
2020-08-24.log
2020-08-25.log
```

Our Python script store logs in a different file every day to make it easier to browse through them. Let's open one of them with the command `cat` (read a file and show it in the Terminal). Replace the name of the file by a date that exist in your log folder.

```bash
cat 2020-08-24.log
```

![](/assets/img/courses/id5415/module1/labxp/3_2_1.png)

## Task 3.3: Downloading Logs

It is often convenient to have the ability to explore log files (or any data file) on your laptop. We achieve this with the `scp` command (`s` standing for `ssh` and `cp` standing for copying): we want to remotely copy.

Back on your computer, open VS Code and its Terminal, and type in the following command, replacing the square brackets with your own username, hostname and thing id. This command means that we copy from the remote Raspberry Pi the directory containing the log of your thing into the local directory backup_log (in your current folder, on your computer)

```bash
scp [username]@[hostname]:/var/log/[your thing id] ./backup_log
```

## Task 3.4 Analyse the Logs

- Look at the first log file in time. It should contain some information about what happens when the Raspberry Pi start.
- Identify repeating patterns, these are most likely pieces of code running in loops
- Look for decision 'The thing is connected to the Internet.'

**Report** On GitHub, in the doc folder, create a `flow.md` file to explain what the system does and draw a basic flow chart.
Wondering what is Flowchart? Look at the example below!

TODO example of flow chart including: diamond with questions, square with actions, arrows looping back
![](/assets/img/courses/id5415/module1/labxp/3_4_1.png)

# Step 4: Data visualisation

In the previous step, the analysis of the logs should have highlighted that the Python script running on the Raspberry Pi sends data to your Thing's digital twin on Bucket.

To explore this data, we can connect to Grafana, a web application running on our server and capable (with your consent) to access and visualise your Things' data.

From your web browser, go to [https://dwd.tudelft.nl/grafana](https://dwd.tudelft.nl/grafana]). To login, click on the grey button 'Sign in with OAuth'. This way you get to sign in with your DCD Lab account. When pressing 'Sign in' for the first time, you will get prompted for the consent to let Grafana access your data. No worry, we are running this service ourself, your data is not leaving for any 3rd party company.

Reaching the home page of Grafana, you can see a directory with your username containing a dashboard with the name of your Thing. Click on the dashboard to open it.

TODO Grafana create a folder with editor rights when creating a user
TODO create dashboard when creating a thing

## Task 4.1: Explore Data

**Report** On GitHub, in the doc folder, create a file prototype_dashboard.md. Describe your prototype dashboard with text and screenshots. What can we see and what these metrics means?
